# Temperature‑Based Fan Speed Control System (ESP32)

Semester project in Industrial Electronics (1st year), focused on the complete design of a custom PCB for an automatic temperature control system using an ESP32 microcontroller, a DC fan, and a DHT22 temperature sensor.
Temperature‑based fan speed control system using an ESP32, DHT22 sensor and a 12 V DC fan. Designed the buck converter (12–40 V to 5 V), motor driver, full PCB in Altium, and firmware with real‑time LCD monitoring.

---

## 1. Project Overview

The goal of this project is to maintain an ambient temperature automatically according to a desired level.  
The system continuously measures room temperature with a DHT22 sensor and adjusts the speed of a 12 V DC fan through a motor driver controlled by an ESP32.  
A buck converter steps the input voltage down from 12–40 V to 5 V to power the ESP32 board, the DHT22 sensor, and a 16x2 I2C display showing the current temperature and fan speed.

---

## 2. System Architecture

Main functional blocks:

- **Power stage**: 12–40 V DC input, buck converter generating 5 V / 2 A for the control electronics.  
- **Control unit**: ESP32 microcontroller reading the DHT22 temperature sensor and generating a PWM signal.  
- **Motor driver stage**: IR2101 high‑side/low‑side gate driver driving an IRFZ44N MOSFET to control the 12 V fan.  
- **User interface**: 16x2 I2C LCD displaying real‑time temperature and fan speed information.

The high‑level architecture and signal flow are illustrated in `docs/system_overview_block_diagram.pdf`.

---

## 3. Electrical Specifications

**Buck Converter**

- Input voltage \(V_\text{in}\): 12 V nominal (up to 40 V supported)  
- Output voltage \(V_\text{out}\): 5 V  
- Maximum output current \(I_\text{out}\): 2 A (for ESP32, sensor, and display)  

**Fan and Motor Driver**

- Fan supply: 12 V DC  
- Fan nominal current: 0.2 A  
- Driver: IR2101 gate driver + IRFZ44N N‑channel MOSFET  
- Control: PWM signal generated by ESP32

Simulation results of the buck converter are available in `docs/buck_simulation_ltspice.png`, and measurement photos are provided in `docs/buck_scope_multimeter_photo.png`.

---

## 4. Hardware Design

All hardware was designed as a custom PCB.

### 4.1 PCB

- Single integrated PCB hosting the ESP32 module, buck converter, motor driver, DHT22 connector, and I2C LCD header.  
- Layout performed in **Altium Designer**.  
- Top/bottom and 3D views are provided in:
  - `docs/pcb_3d_front.png`  
  - `docs/pcb_3d_back.png`

Altium source files and related data are stored under `hardware/`.

### 4.2 Schematic

The full schematic of the system (power stage, control, driver, sensor and display) is available in `docs/schematic.pdf`.

---

## 5. Firmware

The firmware is written in C/C++ for the ESP32.

- Source file: `firmware/codecomplet.ino`  
- Main responsibilities:
  - Read ambient temperature from the DHT22 sensor.  
  - Compute the appropriate PWM duty cycle for the fan based on temperature.  
  - Drive the DC fan via the IR2101 + IRFZ44N stage.  
  - Update the 16x2 I2C LCD with:
    - Current temperature  
    - Current fan speed / PWM percentage  

The duty‑cycle control law can easily be adapted (linear mapping, thresholds, etc.) to meet different thermal profiles.

---

## 6. Prototype and Testing

A functional prototype was assembled and tested on the manufactured PCB.

- Photos of the assembled board and wiring are stored in `media/prototype_photo_1.jpg`.  
- The buck converter output was validated at 5 V with a multimeter while the system was running.  
- The fan speed visibly changes according to the measured temperature, and the LCD shows live temperature and fan information.

A short demonstration video of the system in operation is available (see project video / external link if provided on the GitHub page or LinkedIn Featured section).

---

## 7. How to Reuse or Adapt

To reuse or adapt this project:

1. **Hardware**
   - Provide a 12 V DC source (up to 40 V if your components support it).  
   - Use a 12 V DC fan with similar current rating (~0.2 A).  
   - Connect a DHT22 temperature sensor and a 16x2 I2C LCD as in the schematic.

2. **Firmware**
   - Open `firmware/codecomplet.ino` in your preferred IDE (Arduino IDE / PlatformIO).  
   - Select the correct ESP32 board and serial port.  
   - Adjust pin assignments (PWM, DHT22, I2C) if your hardware differs.  
   - Flash the firmware to the ESP32.

3. **Control Law**
   - Modify the temperature thresholds or mapping between temperature and PWM duty cycle to match your desired thermal behavior.

---

## 8. Possible Improvements

- Implement a closed‑loop control strategy (e.g., PID) for more precise temperature regulation.  
- Add safety features (over‑temperature protection, fan fault detection).  
- Log temperature and duty‑cycle data over time (e.g., via UART or Wi‑Fi).  
- Design an enclosure and add mechanical airflow optimization.

---

## 9. Acknowledgements

This project was carried out as a semester project in Industrial Electronics with academic supervision, focusing on end‑to‑end integration of power electronics, embedded control, PCB design, and practical validation.

# Temperature‑Based Fan Speed Control System (ESP32)

Semester project in Industrial Electronics (1st year), focused on the complete design of a custom PCB for an automatic temperature control system using an ESP32 microcontroller, a DC fan, and a DHT22 temperature sensor.

---

## 1. Project Overview

The goal of this project is to maintain an ambient temperature automatically according to a desired level.  
The system continuously measures room temperature with a DHT22 sensor and adjusts the speed of a 12 V DC fan through a motor driver controlled by an ESP32.  
A buck converter steps the input voltage down from 12–40 V to 5 V to power the ESP32 board, the DHT22 sensor, and a 16x2 I2C display showing the current temperature and fan speed.

---

## 2. System Architecture

Main functional blocks:

- **Power stage**: 12–40 V DC input, buck converter generating 5 V / 2 A for the control electronics.  
- **Control unit**: ESP32 microcontroller reading the DHT22 temperature sensor and generating a PWM signal.  
- **Motor driver stage**: IR2101 high‑side/low‑side gate driver driving an IRFZ44N MOSFET to control the 12 V fan.  
- **User interface**: 16x2 I2C LCD displaying real‑time temperature and fan speed information.

The high‑level architecture and signal flow are illustrated in `docs/system_overview_block_diagram.pdf`.

---

## 3. Electrical Specifications

**Buck Converter**

- Input voltage \(V_\text{in}\): 12 V nominal (up to 40 V supported)  
- Output voltage \(V_\text{out}\): 5 V  
- Maximum output current \(I_\text{out}\): 2 A (for ESP32, sensor, and display)  

**Fan and Motor Driver**

- Fan supply: 12 V DC  
- Fan nominal current: 0.2 A  
- Driver: IR2101 gate driver + IRFZ44N N‑channel MOSFET  
- Control: PWM signal generated by ESP32

Simulation results of the buck converter are available in `docs/buck_simulation_ltspice.png`, and measurement photos are provided in `docs/buck_scope_multimeter_photo.png`.

---

## 4. Hardware Design

All hardware was designed as a custom PCB.

### 4.1 PCB

- Single integrated PCB hosting the ESP32 module, buck converter, motor driver, DHT22 connector, and I2C LCD header.  
- Layout performed in **Altium Designer**.  
- Top/bottom and 3D views are provided in:
  - `docs/pcb_3d_front.png`  
  - `docs/pcb_3d_back.png`

Altium source files and related data are stored under `hardware/`.

### 4.2 Schematic

The full schematic of the system (power stage, control, driver, sensor and display) is available in `docs/schematic.pdf`.

---

## 5. Firmware

The firmware is written in C/C++ for the ESP32.

- Source file: `firmware/codecomplet.ino`  
- Main responsibilities:
  - Read ambient temperature from the DHT22 sensor.  
  - Compute the appropriate PWM duty cycle for the fan based on temperature.  
  - Drive the DC fan via the IR2101 + IRFZ44N stage.  
  - Update the 16x2 I2C LCD with:
    - Current temperature  
    - Current fan speed / PWM percentage  

The duty‑cycle control law can easily be adapted (linear mapping, thresholds, etc.) to meet different thermal profiles.

---

## 6. Prototype and Testing

A functional prototype was assembled and tested on the manufactured PCB.

- Photos of the assembled board and wiring are stored in `media/prototype_photo_1.jpg`.  
- The buck converter output was validated at 5 V with a multimeter while the system was running.  
- The fan speed visibly changes according to the measured temperature, and the LCD shows live temperature and fan information.

A short demonstration video of the system in operation is available (see project video / external link if provided on the GitHub page or LinkedIn Featured section).

---

## 7. How to Reuse or Adapt

To reuse or adapt this project:

1. **Hardware**
   - Provide a 12 V DC source (up to 40 V if your components support it).  
   - Use a 12 V DC fan with similar current rating (~0.2 A).  
   - Connect a DHT22 temperature sensor and a 16x2 I2C LCD as in the schematic.

2. **Firmware**
   - Open `firmware/codecomplet.ino` in your preferred IDE (Arduino IDE / PlatformIO).  
   - Select the correct ESP32 board and serial port.  
   - Adjust pin assignments (PWM, DHT22, I2C) if your hardware differs.  
   - Flash the firmware to the ESP32.

3. **Control Law**
   - Modify the temperature thresholds or mapping between temperature and PWM duty cycle to match your desired thermal behavior.

---

## 8. Possible Improvements

- Implement a closed‑loop control strategy (e.g., PID) for more precise temperature regulation.  
- Add safety features (over‑temperature protection, fan fault detection).  
- Log temperature and duty‑cycle data over time (e.g., via UART or Wi‑Fi).  
- Design an enclosure and add mechanical airflow optimization.

---

## 9. Acknowledgements

This project was carried out as a semester project in Industrial Electronics with academic supervision, focusing on end‑to‑end integration of power electronics, embedded control, PCB design, and practical validation.

